---
title: "Descriptiva"
format: html
editor: visual
---

# Estadística Descriptiva

Vamos a iniciar con la estadística descriptiva para V.A's numéricas.

## Gráficos para Variables numéricas continuas

Vamos a usar a función hist para realizar el histograma.

```{r pesos}
pesos=c(303.37, 301.02, 292.24, 300.30, 299.94, 291.24, 297.93, 306.81, 303.49, 302.12,
292.82, 297.89, 296.84, 301.09, 303.95, 289.44, 296.99, 310.30, 296.80, 302.50,
305.99, 301.16, 305.53, 305.02, 303.21, 310.32, 294.25, 299.62, 306.27, 293.37)
hist(pesos,main = "Histograma Pesos Ceibas")

###

hist(pesos,freq=FALSE,prob=TRUE,col = "lightblue",main='Histograma de pesos de Ceibas',xlab='Toneladas',ylab='Densidad')
lines(density(pesos),col = "chocolate3")

```

**Ejercicio:** Use la base en BaseEjemplo.xlsx, y haga el histograma de frecuencias para las V.A's numéricas.

```{r Hist Discreta}
library(ggplot2)
num_nidos<-c(9,  6,  7,  7,  6,  9,  7,  3,  4,  6,  6,  6,  8,  2,  7,  3,  5,  5,  4,  7,  4,  9,  7,  8,  8,  2, 12, 10,  4,  7)
discreta<-as.data.frame(num_nidos)
ggplot(discreta,aes(num_nidos))+geom_bar()
library(arm)
arm::discrete.histogram(discreta$num_nidos)


```

**Ejercicio:** Use la base en BaseEjemplo.xlsx, y haga el histograma de frecuencias para las V.A's numéricas discretas.

## Variables Categóricas

```{r categoricas}
dolencias=c("O","O","N","J","C","F","B","B","F","O","J","O","O","O","F","F","O","O",
"N","O","N","J","F","J","B","O","C","J","O","J","J","F","N","O","B","M","O","J","M","O","B",
"O","F",  "J",  "O",  "O",  "B",  "N",  "C",  "O",  "O",  "O","M",  "B","F","J",  "O",  "F",  "N")
Tabladolencias=table(dolencias)
barplot(Tabladolencias)
Tabladolencias

###Proporciones

Tabladolencias_prop=Tabladolencias/sum(Tabladolencias)
Tabladolencias_prop

```

**Tarea:** *Use la información en la base BaseEjemplo.xlsx y realice los gráficos de barras para las V.A's categóricas.*

# Medidas de Resumen

```{r Medidas de Resumen pesos}

media_pesos<-mean(pesos) #Media
media_pesos
mediana_pesos<-quantile(pesos,probs = 0.5) #Mediana
mediana_pesos
getmode <- function(v) {
  uniqv <- unique(v)
  uniqv[which.max(tabulate(match(v, uniqv)))]
}
moda_pesos<-getmode(pesos) ###Moda
moda_pesos


```

```{r grafica con medidas}
hist(pesos,col = "white")
abline(v=c(media_pesos,mediana_pesos,moda_pesos),col=c("red","blue","green"))
legend("topleft", legend = c("Media", "Mediana", "Moda"), col = c("red", "blue", "green"), lty = 1, lwd = 2,cex = 0.5)

```

```{r media ponderada}
library(readxl)

Gastos_pond<-read_excel("/Users/sergiocalderon/Documents/GitHub/EstadisticaParaGeografos/EstadisticaParaGeografosUN/Estadistica_Descriptiva/Ponderada.xlsx",sheet = "Ejemplo")

med_pond=(sum(Gastos_pond$Gasto*Gastos_pond$Exposicion))/(sum(Gastos_pond$Exposicion))
med_pond ##Media ponderada
mean(Gastos_pond$Gasto)  ##Media aritmética
```

**Tarea:** Realizar la misma experiencia para los datos de la hoja ejercicio del archivo Ponderada.xlsx.

## Cuantiles

Recordemos que los cuantiles de la distribución se definen como:

Sea $\alpha$ un número entre 0 y 1. El percentil $(100 \alpha)$ o cuantil $(\alpha)$ de la distribución de una V.A. continua $X$, denotado por $\eta(\alpha)$ o $x_{\alpha}$, está definido como un valor que toma la V.A (valor posible de la V.A) tal que satisface

$$\alpha=F(\eta(\alpha))=F(x_{\alpha})=\int_{-\infty}^{x_{\alpha}}f(y)\cdot dy.$$

Los cuantiles representan son valores que toma la V.A, tal que satisface que ese valor deja un cierta probabilidad acumulada de $\alpha.$

```{r cuantiles}
quantile(pesos,probs = c(0.10)) ###Percentil 10
quantile(pesos,probs = c(0.95))###Percentil 95
```

**Cómo se interpretan estos valores?**

# Box-Plot

```{r Box-Plot}
library(plotly)
fig <- plot_ly(y = pesos, type = "box")
fig  ##Vertical
fig_1 <- plot_ly(x = pesos, type = "box")
#fig_1 ##Horizontal


fig_1 <- fig_1 %>% add_boxplot(x = pesos, jitter = 0.3, pointpos = -1.8, boxpoints = 'all',
              marker = list(color = 'rgb(7,40,89)'),
              line = list(color = 'rgb(7,40,89)'),
              name = "All Points")
fig_1
```

```{r Boxplot}
boxplot(pesos)
boxplot(pesos,horizontal = TRUE)
```

```{r Box_Plot Base Ejemplo}
BaseEjemplo <- read_excel("/Users/sergiocalderon/Documents/GitHub/EstadisticaParaGeografos/EstadisticaParaGeografosUN/Estadistica_Descriptiva/BaseEjemplo.xlsx")
fig_gasto <- plot_ly(y = BaseEjemplo$gastosemanal, type = "box")
fig_gasto <- fig_gasto %>% add_boxplot(y = BaseEjemplo$gastosemanal, jitter = 0.3, pointpos = -1.8, boxpoints = 'all',
              marker = list(color = 'rgb(7,40,89)'),
              line = list(color = 'rgb(7,40,89)'),
              name = "All Points")
fig_gasto
```

# Medidas de dispersión o variabilidad, asimetría y sesgo

```{r dispersion}
library(sjstats)
library(moments)

sjstats::cv(pesos) ##Coeficiente de variación es útil, cuando la variable es la misma, pero es hecha en unidades diferentes.
sd(pesos) ###Desviación estándar
sd(pesos)^2 ###Varianza
max(pesos)-min(pesos) ##Rango

skewness(pesos) ###Asimetría

kurtosis(pesos)###Coeficiente de apuntamiento o curtosis, permite ver si tiene colas mas pesadas que la de la distribución normal(el cual es 3 de forma teórica)

```
